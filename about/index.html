<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    
    
      <link rel="stylesheet" href="/css/legend.css">
    
  
</head>
<body>
<div id="header-content">
  <div id="menu-outer">
  <div id="menu-inner">
    
      <a href="/">首页</a>
    
      <a href="/archives">归档</a>
    
      <a href="/about">关于</a>
    
  </div>
</div> 
  <div id="content-outer">
    <div id="content-inner">
      
      
  <article id="page">
     <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSString *londonWeatherUrl = @&quot;http://api.openweathermap.org/data/2.5/weather?q=London,uk&quot; ;</div></pre></td></tr></table></figure>
<p>首先，使用<strong>NSURLConnection</strong>会这么做：  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSURLRequest *request = [NSURLRequest requestWithURL:</div><div class="line">[NSURL URLWithString:londonWeatherUrl]];</div><div class="line">[NSURLConnection sendAsynchronousRequest:request <span class="built_in">queue</span>:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response,</div><div class="line">                   NSData *data,</div><div class="line">                   NSError *connectionError) &#123;</div><div class="line">  <span class="comment">// handle response</span></div><div class="line">  &#125;];</div></pre></td></tr></table></figure>
<p>那来看下<strong>NSURLSession</strong>是怎么做的。这个是<strong>NSURLSession</strong>使用的最简单方法。随后你还会看到怎样配置session，设置其他的特性，比如代理。   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSURLSession *session = [NSURLSession sharedSession];</div><div class="line">[[session dataTaskWithURL:[NSURL URLWithString:londonWeatherUrl]</div><div class="line">      completionHandler:^(NSData *data,</div><div class="line">                          NSURLResponse *response,</div><div class="line">                          NSError *error) &#123;</div><div class="line">        // handle response</div><div class="line">&#125;] resume];</div></pre></td></tr></table></figure>

  </article>

    </div>
      <!-- 多说评论框 -->    
      
        <div class="ds-thread" data-thread-key="about/index.html" data-title="about" data-url="http://yoursite.com/about/index.html"></div>
      
  </div>
</div>

<div id="bottom-outer">
  <div id="bottom-inner">
    i红人 
    ©2016 |Powered by  
    <a href="http://hexo.io" target="_blank">Hexo</a> with theme 
    <a href="http://hexo.io" target="_blank">legend</a>
  </div>

    
      <a href="/atom.xml">
      
      <img src=/images/rss.png height="18" width="18">
      
</div> 


  
  
    <script src="/js/legend.js"></script>
  


</body>
</html>


  <script type="text/javascript">
var duoshuoQuery = {short_name:"ihongren"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
